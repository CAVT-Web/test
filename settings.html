<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</title>
  <style>
    body { font-family: 'Segoe UI'; direction: rtl; background-color: #f0f0f0; margin: 0; padding-top: 60px; }

    /* âœ… Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ */
    .navbar {
      position: fixed;
      top: 0;
      right: 0;
      left: 0;
      background-color: #007bff;
      color: white;
      padding: 15px 30px;
      font-size: 18px;
      font-weight: bold;
      z-index: 1000;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    h2, h3 { margin-bottom: 20px; color: #333; padding: 0 30px; }
    label { display: block; margin-top: 15px; font-weight: bold; padding: 0 30px; }
    input, button {
      width: calc(100% - 60px);
      margin: 5px 30px;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;
    }
    button { font-weight: bold; cursor: pointer; margin-top: 15px; }
    .danger { background-color: #dc3545; color: white; }
    .stats-box {
      background-color: #eef;
      padding: 15px 30px;
      margin: 20px 30px;
      border-radius: 8px;
      border: 1px solid #99c;
    }
    .car-item {
      background:#fff;
      padding:10px;
      margin:10px 30px;
      border-radius:6px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .car-item button {
      margin-top: 8px;
      margin-left: 8px;
      width: auto;
    }
  </style>
</head>
<body>
<div id="navbar" style="background:#007bff; padding:10px; color:white; display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
  <div>
    <a href="index.html" style="color:white; margin-right:15px;">ğŸš— Ø§Ù„Ø­Ø¬Ø²</a>
    <a href="dashboard.html" style="color:white; margin-right:15px;">ğŸ“‹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</a>
    <a href="settings.html" style="color:white; margin-right:15px;">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a>
  </div>
  <div>
    ğŸ‘¤ Ù…Ø±Ø­Ø¨Ù‹Ø§ØŒ <span id="usernameDisplay"></span>
    <a href="#" onclick="logout()" style="color:#ffdddd; margin-right:15px;">ğŸšª Ø®Ø±ÙˆØ¬</a>
  </div>
</div>

  <!-- âœ… Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
  <div class="navbar">Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ğŸš—</div>

  <h2>âš™ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h2>

  <label for="carName">Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</label>
  <input type="text" id="carName">

  <label for="carPrice">Ø³Ø¹Ø± Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ (Ø¯ÙŠÙ†Ø§Ø±):</label>
  <input type="number" id="carPrice">

  <button onclick="addCar()" style="background-color:#28a745; color:white;">â• Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø©</button>

  <h3>ğŸš— Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</h3>
  <div id="carList"></div>

  <hr>

  <button class="danger" onclick="clearBookings()">ğŸ—‘ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</button>

  <div class="stats-box" id="statsBox"></div>

  <script>
    function getCars() {
      return JSON.parse(localStorage.getItem("cars") || "[]");
    }

    function saveCars(cars) {
      localStorage.setItem("cars", JSON.stringify(cars));
    }

    function addCar() {
      const name = document.getElementById("carName").value.trim();
      const price = parseInt(document.getElementById("carPrice").value, 10);
      if (name && !isNaN(price)) {
        const cars = getCars();
        cars.push({ name, price });
        saveCars(cars);
        showCarList();
        document.getElementById("carName").value = "";
        document.getElementById("carPrice").value = "";
        alert(`âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø±Ø©: ${name} Ø¨Ø³Ø¹Ø± ${price} Ø¯ÙŠÙ†Ø§Ø±/ÙŠÙˆÙ…`);
      } else {
        alert("âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… ÙˆØ³Ø¹Ø± ØµØ§Ù„Ø­.");
      }
    }

    function showCarList() {
      const cars = getCars();
      const listDiv = document.getElementById("carList");
      if (cars.length === 0) {
        listDiv.innerHTML = "<i style='padding:30px;'>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙŠØ§Ø±Ø§Øª Ù…Ø³Ø¬Ù„Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</i>";
        return;
      }

      listDiv.innerHTML = "";
      cars.forEach((car, index) => {
        const item = document.createElement("div");
        item.className = "car-item";
        item.innerHTML = `
          <strong>${car.name}</strong> â€” ${car.price} Ø¯ÙŠÙ†Ø§Ø±/ÙŠÙˆÙ…<br>
          <button onclick="editCar(${index})" style="background-color:#ffc107; color:black;">âœï¸ ØªØ¹Ø¯ÙŠÙ„</button>
          <button onclick="deleteCar(${index})" class="danger">ğŸ—‘ Ø­Ø°Ù</button>
        `;
        listDiv.appendChild(item);
      });
    }

    function editCar(index) {
      const cars = getCars();
      const car = cars[index];
      const newName = prompt("ğŸ”„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø³ÙŠØ§Ø±Ø©:", car.name);
      const newPrice = prompt("ğŸ”„ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø¹Ø± Ø§Ù„ÙŠÙˆÙ…ÙŠ:", car.price);

      if (newName && !isNaN(newPrice) && newPrice !== "") {
        cars[index] = { name: newName.trim(), price: parseInt(newPrice, 10) };
        saveCars(cars);
        showCarList();
        alert("âœ… ØªÙ… ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø©!");
      } else {
        alert("âš ï¸ Ø¥Ø¯Ø®Ø§Ù„ ØºÙŠØ± ØµØ§Ù„Ø­ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„.");
      }
    }

    function deleteCar(index) {
      const cars = getCars();
      if (confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø© "${cars[index].name}"ØŸ`)) {
        cars.splice(index, 1);
        saveCars(cars);
        showCarList();
        alert("ğŸš— ØªÙ… Ø­Ø°Ù Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­.");
      }
    }

    function clearBookings() {
      if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§ØªØŸ")) {
        localStorage.removeItem("bookings");
        alert("âœ… ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª.");
        showStats();
      }
    }

    function showStats() {
      const bookings = JSON.parse(localStorage.getItem("bookings") || "[]");
      let total = 0;
      let days = 0;
      bookings.forEach(b => {
        total += parseInt(b.total.replace("Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ", "").replace(" Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ", ""));
        days += parseInt(b.duration.replace("Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…: ", ""));
      });

      document.getElementById("statsBox").innerHTML = `
        ğŸ“Š <strong>Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©:</strong><br>
        ğŸ”¢ Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª: ${bookings.length}<br>
        ğŸ“… Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø£ÙŠØ§Ù…: ${days}<br>
        ğŸ’° Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¯Ø§Ø®ÙŠÙ„: ${total} Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ
      `;
    }

    // ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    window.onload = function () {
      showStats();
      showCarList();
    };
  </script>

</body>
</html>